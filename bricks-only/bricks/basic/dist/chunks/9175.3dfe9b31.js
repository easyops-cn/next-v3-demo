/*! For license information please see 9175.3dfe9b31.js.LICENSE.txt */
(self.webpackChunk_next_bricks_basic=self.webpackChunk_next_bricks_basic||[]).push([[9175,533],{2003:(e,t,r)=>{"use strict";r.d(t,{Y:()=>E});var n=r(8657),i=r.n(n),o=(0,n.createContext)({previewImageList:[],currentUUid:void 0,setCurrentUUid:()=>null,registerImage:()=>()=>null}),a=r(4949),s=r(2779),c=r.n(s),l=r(3028),u={translateX:0,translateY:0,scale:1,rotate:0},p=(0,a.wrapBrick)("icons.general-icon"),d=e=>{var t,r,{visible:a,onClose:s,scaleStep:d=.5}=e,{transform:f,resetTransform:v,updateTransform:g,dispatchZoomChange:m}=function(){var[e,t]=(0,n.useState)(u),r=e=>{requestAnimationFrame((()=>{t((t=>(0,l.Z)((0,l.Z)({},t),e)))}))};return{transform:e,resetTransform:()=>{t(u)},updateTransform:r,dispatchZoomChange:t=>{var n=e.scale*t;n>50?n=50:n<1&&(n=1),r({scale:n})}}}();(0,n.useEffect)((()=>{a||v()}),[a]);var{previewImageList:h,currentUUid:w,setCurrentUUid:b}=(0,n.useContext)(o),y=h.map((e=>e.uuid)),x=y.indexOf(w),k=[{icon:i().createElement(p,{lib:"antd",theme:"outlined",icon:"close"}),onClick:s,type:"close"},{icon:i().createElement(p,{lib:"antd",theme:"outlined",icon:"zoom-in"}),onClick:()=>{m(1+d)},type:"zoom-in",disabled:f.scale>=50},{icon:i().createElement(p,{lib:"antd",theme:"outlined",icon:"zoom-out"}),onClick:()=>{m(1-d)},type:"zoom-out",disabled:f.scale<=1},{icon:i().createElement(p,{lib:"antd",theme:"outlined",icon:"rotate-right"}),onClick:()=>{g({rotate:f.rotate+90})},type:"rotate-right"},{icon:i().createElement(p,{lib:"antd",theme:"outlined",icon:"rotate-left"}),onClick:()=>{g({rotate:f.rotate-90})},type:"rotate-left"}];return i().createElement("div",{className:"preview-root",style:{visibility:a?"visible":"hidden"}},i().createElement("div",{className:"preview-mask"}),i().createElement("div",{className:"preview-wrap"},i().createElement("div",{className:"preview-image-wrap",onClick:e=>{e.target===e.currentTarget&&(null==s||s())}},i().createElement("img",{className:"preview-image",draggable:!1,src:null===(t=h[x])||void 0===t?void 0:t.src,alt:null===(r=h[x])||void 0===r?void 0:r.alt,style:{transform:"translate3d(".concat(f.translateX,"px, ").concat(f.translateY,"px, 0) scale3d(").concat(f.scale,", ").concat(f.scale,", 1) rotate(").concat(f.rotate,"deg)")}}))),i().createElement("div",{className:"preview-operations"},i().createElement("div",{className:c()("preview-switch","preview-switch-left",{"preview-switch-disabled":x<=0}),onClick:()=>{b(y[x-1<=0?0:x-1])}},i().createElement(p,{lib:"antd",theme:"outlined",icon:"left"})),i().createElement("div",{className:c()("preview-switch","preview-switch-right",{"preview-switch-disabled":x>=h.length-1}),onClick:()=>{var e=x+1>=h.length-1?h.length-1:x+1;b(y[e])}},i().createElement(p,{lib:"antd",theme:"outlined",icon:"right"})),i().createElement("div",{className:"preview-operations-bar"},i().createElement("div",{className:"preview-operations-progress"},"".concat(x+1," / ").concat(h.length)),k.map((e=>{var{icon:t,type:r,disabled:n,onClick:o}=e;return i().createElement("div",{"data-testid":"preview-operations-button-".concat(r),className:c()("preview-operations-button",{"preview-operations-button-disabled":!!n}),onClick:o,key:r},t)})))))},f=r(4795),v=new Map,g=e=>new Promise(((t,r)=>{var n=new Image;n.onload=()=>t(!0),n.onerror=()=>t(!1),n.src=e})),m=e=>new Promise(((t,r)=>{!function(){var n=(0,f.Z)((function*(){for(var n of e)if(v.has(n)||v.set(n,g(n)),yield v.get(n))return void t(n);r(e[e.length-1])}));return function(){return n.apply(this,arguments)}}()()})),h=0,w="data:image/svg+xml;base64,".concat(window.btoa('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 180" style="background: rgb(238, 240, 244);"><g transform="translate(-12, -12)"><svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" color="current" x="160" y="90"><g fill="currentColor" fill-rule="nonzero"><path d="M21.042 2.11c1.19 0 2.156.966 2.156 2.156v15.288c0 1.19-.966 2.156-2.156 2.156H2.925a2.157 2.157 0 0 1-2.156-2.156V4.266c0-1.192.965-2.157 2.156-2.157h18.117Zm0 1.5H2.925a.656.656 0 0 0-.656.656v15.288c0 .361.294.656.656.656h18.117a.657.657 0 0 0 .656-.656V4.266a.657.657 0 0 0-.656-.657Z" style="&#10;  fill: #9FAECF;&#10;"/><path d="M9.516 5.344a2.298 2.298 0 1 1-.002 4.595 2.298 2.298 0 0 1 .002-4.595ZM19.847 18.117H4.123a.469.469 0 0 1-.406-.703l1.868-4.453c.722-1.25 2.527-1.25 3.249 0l.864 1.5a.938.938 0 0 0 1.657-.063l2.818-5.87c.51-1.063 2.027-1.063 2.536.003l3.56 8.916c.15.31-.078.67-.422.67Z" style="&#10;  fill: #57689C;&#10;"/></g></svg></g></svg>')),b=(0,a.wrapBrick)("icons.general-icon");function y(e){var{index:t,src:r,fallback:a,placeholder:s,alt:c,width:l,height:u,style:p,onClick:d,preview:f=!0}=e,v=(0,n.useMemo)((()=>[r,a,w]),[r,a]),{status:g,src:y}=function(e){var[t,r]=i().useState(),[o,a]=i().useState();return(0,n.useEffect)((()=>{var t=[].concat(e).filter(Boolean);a(void 0),t.length?(r("loading"),m(t).then((e=>{r("normal"),a(e)})).catch((e=>{r("error"),a(e)}))):r("normal")}),[e]),{status:t,src:o}}(v),[x]=i().useState(++h),{registerImage:k}=(0,n.useContext)(o);return(0,n.useEffect)((()=>k(x,{uuid:x,src:y,preview:f,index:t,alt:c})),[]),(0,n.useEffect)((()=>{k(x,{uuid:x,src:y,preview:f,index:t,alt:c})}),[y,f,c,t]),i().createElement(i().Fragment,null,i().createElement("div",{className:"image-wrapper",onClick:()=>null==d?void 0:d(x,f),style:{width:l,height:u}},i().createElement("img",{className:"image",src:y,alt:c,width:l,height:u,style:p}),"loading"===g&&i().createElement("div",{"aria-hidden":"true",className:"image-placeholder"},s),!!f&&i().createElement("div",{className:"image-mask"},i().createElement("div",{className:"image-mask-info"},i().createElement(b,{lib:"antd",theme:"outlined",icon:"eye",className:"image-mask-info-icon"}),"预览"))))}var x=r(5178),{Provider:k}=o,E=(0,n.forwardRef)((function(e,t){var{imgList:r,onVisibleChange:o}=e,[a,s]=(0,n.useState)(!1),[c,l]=(0,n.useState)(void 0),u=(e,t)=>{t&&(l(e),s(!0),null==o||o(!0))},[p,f]=(0,n.useState)(new Map),v=Array.from(p.values()).filter((e=>!!e.preview)).sort(((e,t)=>e.index-t.index));return(0,n.useImperativeHandle)(t,(()=>({openPreview:e=>{var t,r;(0,x.isNil)(e)?l(null===(t=v[0])||void 0===t?void 0:t.uuid):l(null===(r=v.find((t=>t.index===e)))||void 0===r?void 0:r.uuid),s(!0),null==o||o(!0)},closePreview:()=>{s(!1),null==o||o(!1)}}))),i().createElement(i().Fragment,null,i().createElement(k,{value:{previewImageList:v,currentUUid:c,setCurrentUUid:l,registerImage:(e,t)=>(f((r=>new Map(r).set(e,t))),()=>{f((t=>{var r=new Map(t);return r.delete(e)?r:t}))})}},null==r?void 0:r.map(((e,t)=>i().createElement(y,{key:t,index:t,src:e.src,fallback:e.fallback,placeholder:e.placeholder,alt:e.alt,width:e.width,height:e.height,style:e.style,preview:e.preview,onClick:u}))),i().createElement(d,{visible:a,onClose:()=>{s(!1),null==o||o(!1)}})))}))},2779:(e,t)=>{var r;!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r)){if(r.length){var a=i.apply(null,r);a&&e.push(a)}}else if("object"===o){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){e.push(r.toString());continue}for(var s in r)n.call(r,s)&&r[s]&&e.push(s)}}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(r=function(){return i}.apply(t,[]))||(e.exports=r)}()},6941:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(9601),i=r.n(n),o=r(2609),a=r.n(o)()(i());a.push([e.id,".image-wrapper{position:relative}.image{vertical-align:middle}.image-placeholder{position:absolute;top:0;right:0;bottom:0;left:0}.image-wrapper:hover .image-mask{opacity:1}.image-mask{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;font-size:14px;color:#fff;background:rgba(0,0,0,0.5);cursor:pointer;opacity:0;transition:opacity 0.3s}.image-mask-info{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;padding:0 4px}.image-mask-info-icon{margin-right:4px;vertical-align:middle}",""]);const s=a.toString()},6929:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(9601),i=r.n(n),o=r(2609),a=r.n(o)()(i());a.push([e.id,".preview-mask{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1000;background-color:var(--antd-modal-mask-bg)}.preview-wrap{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1000}.preview-image-wrap{position:absolute;inset:0;display:flex;justify-content:center;align-items:center}.preview-image{max-width:100%;max-height:100%;vertical-align:middle;transition:transform 0.3s cubic-bezier(0.215,0.61,0.355,1) 0s;cursor:-webkit-grab;cursor:grab;-webkit-user-select:none;-moz-user-select:none;user-select:none}.preview-operations{position:fixed;z-index:1080}.preview-switch{font-size:18px;width:40px;height:40px;position:fixed;top:50%;transform:translateY(-50%);border-radius:50%;display:flex;align-items:center;justify-content:center;z-index:1081;background:rgba(0,0,0,0.1);color:#fff;cursor:pointer;transition:background,color 0.3s}.preview-switch:not(.preview-switch-disabled):hover{background:rgba(0,0,0,0.2)}.preview-switch-disabled{color:rgba(255,255,255,0.25);background:none;cursor:not-allowed}.preview-switch-left{left:12px}.preview-switch-right{right:12px}.preview-operations-bar{position:fixed;left:0;right:0;top:0;font-size:14px;color:#fff;background:rgba(0,0,0,0.1);display:flex;flex-direction:row-reverse;align-items:center}.preview-operations-progress{position:absolute;left:50%;transform:translateX(-50%)}.preview-operations-button{font-size:18px;margin-left:12px;padding:12px;cursor:pointer;transition:background,color 0.3s}.preview-operations-button:last-of-type{margin-left:0}.preview-operations-button:hover{background:rgba(0,0,0,0.2)}.preview-operations-button-disabled{color:rgba(255,255,255,0.25);pointer-events:none}",""]);const s=a.toString()},2609:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r="",n=void 0!==t[5];return t[4]&&(r+="@supports (".concat(t[4],") {")),t[2]&&(r+="@media ".concat(t[2]," {")),n&&(r+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),r+=e(t),n&&(r+="}"),t[2]&&(r+="}"),t[4]&&(r+="}"),r})).join("")},t.i=function(e,r,n,i,o){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(n)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(a[c]=!0)}for(var l=0;l<e.length;l++){var u=[].concat(e[l]);n&&a[u[0]]||(void 0!==o&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=o),r&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=r):u[2]=r),i&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=i):u[4]="".concat(i)),t.push(u))}},t}},9601:e=>{"use strict";e.exports=function(e){return e[1]}},5303:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(6522);function i(e,t,r){return(i=function(){function e(e,t){return function(n){!function(e,t){if(e.v)throw new Error("attempted to call addInitializer after decoration was finished")}(t),r(n,"An initializer"),e.push(n)}}function t(t,r,n,i,o,a,s,c){var l;switch(o){case 1:l="accessor";break;case 2:l="method";break;case 3:l="getter";break;case 4:l="setter";break;default:l="field"}var u,p,d={kind:l,name:s?"#"+r:r,static:a,private:s},f={v:!1};0!==o&&(d.addInitializer=e(i,f)),0===o?s?(u=n.get,p=n.set):(u=function(){return this[r]},p=function(e){this[r]=e}):2===o?u=function(){return n.value}:(1!==o&&3!==o||(u=function(){return n.get.call(this)}),1!==o&&4!==o||(p=function(e){n.set.call(this,e)})),d.access=u&&p?{get:u,set:p}:u?{get:u}:{set:p};try{return t(c,d)}finally{f.v=!0}}function r(e,t){if("function"!=typeof e)throw new TypeError(t+" must be a function")}function i(e,t){var i=(0,n.Z)(t);if(1===e){if("object"!==i||null===t)throw new TypeError("accessor decorators must return an object with get, set, or init properties or void 0");void 0!==t.get&&r(t.get,"accessor.get"),void 0!==t.set&&r(t.set,"accessor.set"),void 0!==t.init&&r(t.init,"accessor.init")}else if("function"!==i)throw new TypeError((0===e?"field":10===e?"class":"method")+" decorators must return a function or void 0")}function o(e,r,n,o,a,s,c,l){var u,p,d,f,v,g,m=n[0];if(c?u=0===a||1===a?{get:n[3],set:n[4]}:3===a?{get:n[3]}:4===a?{set:n[3]}:{value:n[3]}:0!==a&&(u=Object.getOwnPropertyDescriptor(r,o)),1===a?d={get:u.get,set:u.set}:2===a?d=u.value:3===a?d=u.get:4===a&&(d=u.set),"function"==typeof m)void 0!==(f=t(m,o,u,l,a,s,c,d))&&(i(a,f),0===a?p=f:1===a?(p=f.init,v=f.get||d.get,g=f.set||d.set,d={get:v,set:g}):d=f);else for(var h=m.length-1;h>=0;h--){var w;void 0!==(f=t(m[h],o,u,l,a,s,c,d))&&(i(a,f),0===a?w=f:1===a?(w=f.init,v=f.get||d.get,g=f.set||d.set,d={get:v,set:g}):d=f,void 0!==w&&(void 0===p?p=w:"function"==typeof p?p=[p,w]:p.push(w)))}if(0===a||1===a){if(void 0===p)p=function(e,t){return t};else if("function"!=typeof p){var b=p;p=function(e,t){for(var r=t,n=0;n<b.length;n++)r=b[n].call(e,r);return r}}else{var y=p;p=function(e,t){return y.call(e,t)}}e.push(p)}0!==a&&(1===a?(u.get=d.get,u.set=d.set):2===a?u.value=d:3===a?u.get=d:4===a&&(u.set=d),c?1===a?(e.push((function(e,t){return d.get.call(e,t)})),e.push((function(e,t){return d.set.call(e,t)}))):2===a?e.push(d):e.push((function(e,t){return d.call(e,t)})):Object.defineProperty(r,o,u))}function a(e,t){for(var r,n,i=[],a=new Map,c=new Map,l=0;l<t.length;l++){var u=t[l];if(Array.isArray(u)){var p,d,f=u[1],v=u[2],g=u.length>3,m=f>=5;if(m?(p=e,0!=(f-=5)&&(d=n=n||[])):(p=e.prototype,0!==f&&(d=r=r||[])),0!==f&&!g){var h=m?c:a,w=h.get(v)||0;if(!0===w||3===w&&4!==f||4===w&&3!==f)throw new Error("Attempted to decorate a public method/accessor that has the same name as a previously decorated public method/accessor. This is not currently supported by the decorators plugin. Property name was: "+v);!w&&f>2?h.set(v,f):h.set(v,!0)}o(i,p,u,v,f,m,g,d)}}return s(i,r),s(i,n),i}function s(e,t){t&&e.push((function(e){for(var r=0;r<t.length;r++)t[r].call(e);return e}))}return function(t,r,n){return{e:a(t,r),get c(){return function(t,r){if(r.length>0){for(var n=[],o=t,a=t.name,s=r.length-1;s>=0;s--){var c={v:!1};try{var l=r[s](o,{kind:"class",name:a,addInitializer:e(n,c)})}finally{c.v=!0}void 0!==l&&(i(10,l),o=l)}return[o,function(){for(var e=0;e<n.length;e++)n[e].call(o)}]}}(t,n)}}}}())(e,t,r)}},4795:(e,t,r)=>{"use strict";function n(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(i,o){var a=e.apply(t,r);function s(e){n(a,i,o,s,c,"next",e)}function c(e){n(a,i,o,s,c,"throw",e)}s(void 0)}))}}r.d(t,{Z:()=>i})},5863:(e,t,r)=>{"use strict";function n(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}r.d(t,{Z:()=>n})},175:(e,t,r)=>{"use strict";function n(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}r.d(t,{Z:()=>n})},687:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(175);function i(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,(0,n.Z)(e,t,"get"))}},3395:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(5863);function i(e,t,r){(0,n.Z)(e,t),t.set(e,r)}},381:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(175);function i(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,(0,n.Z)(e,t,"set"),r),r}},6666:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(5850);function i(e,t,r){return(t=(0,n.Z)(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},3028:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(6666);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},5850:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(6522);function i(e){var t=function(e,t){if("object"!==(0,n.Z)(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==(0,n.Z)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===(0,n.Z)(t)?t:String(t)}},6522:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r.d(t,{Z:()=>n})}}]);
//# sourceMappingURL=9175.3dfe9b31.js.map