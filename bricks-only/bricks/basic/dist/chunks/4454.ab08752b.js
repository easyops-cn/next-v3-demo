"use strict";(self.webpackChunk_next_bricks_basic=self.webpackChunk_next_bricks_basic||[]).push([[4454],{4454:(r,e,t)=>{t.r(e),t.d(e,{enqueueStableLoadBricks:()=>d,enqueueStableLoadProcessors:()=>v,flushStableLoadBricks:()=>f,loadBricksImperatively:()=>h,loadProcessorsImperatively:()=>w,loadScript:()=>a,loadSharedModule:()=>c});var n=new Map;function a(r,e){if(Array.isArray(r))return Promise.all(r.map((r=>a(r,e))));var t=e?"".concat(e).concat(r):r,i=n.get(t);if(i)return i;var o=new Promise(((r,e)=>{var n=()=>{window.dispatchEvent(new Event("request.end"))},a=document.createElement("script");a.src=t,a.type="text/javascript",a.async=!0,a.onload=()=>{r(t),n()},a.onerror=r=>{e(r),n()};var i=document.currentScript||document.getElementsByTagName("script")[0];i.parentNode.insertBefore(a,i),window.dispatchEvent(new Event("request.start"))}));return n.set(t,o),o}var i,o=t(4795);function c(r,e){return s.apply(this,arguments)}function s(){return(s=(0,o.Z)((function*(r,e){yield t.I("default");var n=window[r];return yield n.init(t.S.default),(yield n.get(e))()}))).apply(this,arguments)}var l,u=!1,p=new Promise((r=>{i=r}));function f(){u||i()}function d(r,e){return L(E("bricks",r,e))}function v(r,e){return L(E("processors",r,e))}function h(r,e){return y.apply(this,arguments)}function y(){return(y=(0,o.Z)((function*(r,e){var t=E("bricks",r,e);return f(),L(t)}))).apply(this,arguments)}function w(r,e){var t=E("processors",r,e);return f(),L(t)}var m="v2-adapter.load-bricks";function k(r,e,t){var n=new Map,a=new Set,i=e=>{var o;if(!a.has(e)){var c,s,l;if(a.add(e),"processors"===r||e.includes(".")){[s,l]=e.split(".");var u="bricks/".concat("processors"===r?s.replace(/[A-Z]/g,(r=>"-".concat(r[0].toLocaleLowerCase()))).replace(/_[0-9]/g,(r=>"-".concat(r[1]))):s);c=t.get(u)}else for(var p of(l=e,t.values())){var f;if(null!==(f=p.elements)&&void 0!==f&&f.some((r=>r===l))){c=p;break}}if(!c)throw new Error("Package for ".concat(e," not found."));var d=n.get(c);d||(d=[],n.set(c,d)),d.push(l);var v=null===(o=c.dependencies)||void 0===o?void 0:o[e];if(v)for(var h of v)i(h)}};for(var o of e)i(o);return n}function b(r,e,t){return P.apply(this,arguments)}function P(){return(P=(0,o.Z)((function*(r,e,t){var n="".concat("processors"===r?"./processors/":"./").concat(t);try{yield c(e,n)}catch(t){throw console.error(t),new Error("Load ".concat(r,' of "').concat(e.split("/").pop(),".").concat(n.split("/").pop(),'" failed'))}}))).apply(this,arguments)}function g(r,e,t){return e.map(function(){var e=(0,o.Z)((function*(e){var n;return yield a(e.filePath,null!==(n=window.PUBLIC_ROOT)&&void 0!==n?n:""),yield p,Promise.all(t.get(e).map((t=>b(r,e.id,t))))}));return function(r){return e.apply(this,arguments)}}())}function E(r,e,t){return _.apply(this,arguments)}function _(){return _=(0,o.Z)((function*(r,e,t){var n=new Map;for(var c of t){var s,p=null!==(s=c.id)&&void 0!==s?s:Z(c.filePath);n.set(p,c)}var f,d,v=k(r,e,n),h=[],y=[];for(var w of v.keys())w.id?"bricks/basic"===w.id?f=w:y.push(w):(h.push(w),(d=n.get("bricks/v2-adapter"))||console.error("Using v2 bricks, but v2-adapter not found"));var P,E=d,_=f;if(_){var L,S=a(_.filePath,null!==(L=window.PUBLIC_ROOT)&&void 0!==L?L:"");u||(u=!0,S.then((()=>Promise.resolve())).then(i)),P=S.then((()=>Promise.all(v.get(_).map((e=>b(r,_.id,e))))))}var B=[P].concat(g(r,y,v));if(E&&h.length>0){if(!l){var q=k("bricks",[m],n),C=[...q.keys()],I=function(){var r=(0,o.Z)((function*(){return yield Promise.all(g("bricks",C,q)),document.createElement(m)}));return function(){return r.apply(this,arguments)}}();l=I()}B.push(l.then((e=>Promise.all(h.map((n=>{var a=Z(n.filePath).split("/")[1];return e.resolve(E.filePath,n.filePath,"bricks"===r?v.get(n).map((r=>"".concat(a,".").concat(r))):[],n.dll,t)}))))))}yield Promise.all(B)})),_.apply(this,arguments)}function L(r){return S.apply(this,arguments)}function S(){return(S=(0,o.Z)((function*(r){window.dispatchEvent(new Event("request.start"));try{yield r}finally{window.dispatchEvent(new Event("request.end"))}}))).apply(this,arguments)}function Z(r){return r.split("/").slice(0,2).join("/")}}}]);
//# sourceMappingURL=4454.ab08752b.js.map